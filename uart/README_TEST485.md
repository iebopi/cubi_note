# 串口、485测试说明

# By CEIV

1. 串口连通性测试

1.1 删除串口锁 rm /var/lock/* -r

1.2 交叉编译测试程序

    如：arm-linux-gnueabi-gcc uart_app.c -o uart_app

1.3 修改系统配置文件（A20对应sys_config.fex，imx6对应设备树文件）

    根据硬件原理图找到所使用的uart端口号（如ttyS2）和tx/rx引脚号，并对应修改相应的配置文件，制作系统固件。

1.4 自发自收测试

    连接串口rx、tx，执行测试程序  ./uart_app /dev/ttyS4 -b 19200 -l -rw "123456" -asc

    程序正常运行时，打印write信息，如果收发都正常，控制台打印read信息与write信息一致。

    如果只打印write信息，不打印read信息，则串口rx或tx存在问题，可将tx引到电脑端rx测试板卡tx连通性，将rx引到电脑端测试板卡rx连通性。


2. 485测试

   根据硬件原理图查找485读写使用引脚，并根据《异型屏所用GPIO对应文档》查找gpio对应的设备节点，创建并设置相应IO为高低点平，通过485模块

   连接到PC端进行485收发测试。

   如果串口连通性测试正常，GPIO设置正常，但485不通，排查板载485模块电路。